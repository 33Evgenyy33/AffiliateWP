jQuery(document).ready(function(e){function i(i){e.cookie("affwp_ref",i,{expires:AFFWP.expiration,path:"/"}),e.ajax({type:"POST",data:{action:"affwp_track_visit",affiliate:i,url:document.URL,referrer:document.referrer},url:affwp_scripts.ajaxurl,success:function(i){e.cookie("affwp_ref_visit_id",i,{expires:AFFWP.expiration,path:"/"})}}).fail(function(e){window.console&&window.console.log&&console.log(e)})}function a(){for(var e,i=[],a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),o=0;o<a.length;o++){e=a[o].split("="),i.push(e[0]);var f="undefined"==typeof e[1]?0:1,r=e[f].indexOf("#");e[f]=e[f].substring(0,-1!=r?r:e[f].length),i[e[0]]=e[f]}return i}var o=e.cookie("affwp_ref"),f=AFFWP.referral_credit_last;if("1"==f||!o){var r=a()[AFFWP.referral_var];if("undefined"==typeof r){var n=window.location.pathname.split("/");e.each(n,function(e,i){AFFWP.referral_var==i&&(r=n[e+1])})}e.isNumeric(r)?r&&!o?i(r):"1"==f&&o&&(e.removeCookie("affwp_ref"),i(r)):e.ajax({type:"POST",data:{action:"affwp_get_affiliate_id",affiliate:r},url:affwp_scripts.ajaxurl,success:function(a){"1"==a.data.success&&("1"==f&&o&&e.removeCookie("affwp_ref"),i(a.data.affiliate_id))}}).fail(function(e){window.console&&window.console.log&&console.log(e)})}});