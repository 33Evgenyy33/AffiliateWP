jQuery(document).ready(function($){$("#affwp-generate-ref-url").submit(function(){var url=$(this).find("#affwp-url").val(),campaign=$(this).find("#affwp-campaign").val(),refVar=$(this).find('input[type="hidden"].affwp-referral-var').val(),affId=$(this).find('input[type="hidden"].affwp-affiliate-id').val(),prettyAffiliateUrls=affwp_vars.pretty_affiliate_urls,add="";if(url.indexOf("#")>0)var fragment=url.split("#");if(fragment&&(url=fragment[0]),prettyAffiliateUrls){if(url.indexOf("?")<0)url.match(/\/$/)||(url+="/"),campaign.length&&(campaign="?campaign="+campaign);else{var pieces=url.split("?");url=pieces[0],url.match(/\/$/)||(url+="/"),add="/?"+pieces[1],campaign.length&&(campaign="&campaign="+campaign)}url=url+refVar+"/"+affId+add+campaign}else{if(campaign.length&&(campaign="&campaign="+campaign),url.indexOf("?")<0)url.match(/\/$/)||(url+="/");else{var pieces=url.split("?");url=pieces[0],url.match(/\/$/)||(url+="/"),add="&"+pieces[1]}url=url+"?"+refVar+"="+affId+add+campaign}return fragment&&(url+="#"+fragment[1]),url=url.replace(/([^:])(\/\/+)/g,"$1/"),$(this).find(".affwp-referral-url-wrap").slideDown(),$(this).find("#affwp-referral-url").val(url).focus(),!1})});